[![Masterpoint Logo](https://i.imgur.com/RDLnuQO.png)](https://masterpoint.io)

[![Release](https://img.shields.io/github/release/masterpointio/terraform-aws-client-vpn.svg)](https://github.com/masterpointio/terraform-aws-client-vpn/releases/latest)

# terraform-aws-client-vpn

## About

This implementation was originally inspired by [DNXLabs/terraform-aws-client-vpn](https://github.com/DNXLabs/terraform-aws-client-vpn).

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name      | Version |
| --------- | ------- |
| terraform | >= 0.13 |
| aws       | >= 2.0  |
| local     | >= 1.2  |
| null      | >= 2.0  |

## Providers

| Name     | Version |
| -------- | ------- |
| aws      | >= 2.0  |
| local    | >= 1.2  |
| null     | >= 2.0  |
| template | n/a     |
| tls      | n/a     |

## Inputs

| Name                              | Description                                                                                                                                                                                                                                                                                                                                 | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Default                                                                                                                                                                                                                                                                                                                | Required |
| --------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------: |
| additional\_tag\_map              | Additional tags for appending to tags\_as\_list\_of\_maps. Not added to `tags`.                                                                                                                                                                                                                                                             | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `{}`                                                                                                                                                                                                                                                                                                                   |    no    |
| attributes                        | Additional attributes (e.g. `1`)                                                                                                                                                                                                                                                                                                            | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `[]`                                                                                                                                                                                                                                                                                                                   |    no    |
| authorization\_rule\_target\_cidr | The target CIDR address within your VPC that you would like to provider authorization for.                                                                                                                                                                                                                                                  | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                    |   yes    |
| client\_cidr                      | Network CIDR to use for clients                                                                                                                                                                                                                                                                                                             | `any`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | n/a                                                                                                                                                                                                                                                                                                                    |   yes    |
| context                           | Single object for setting entire context at once.<br>See description of individual variables for details.<br>Leave string and numeric variables as `null` to use default value.<br>Individual variable settings (non-null) override settings in context object,<br>except for attributes, tags, and additional\_tag\_map, which are merged. | <pre>object({<br>    enabled             = bool<br>    namespace           = string<br>    environment         = string<br>    stage               = string<br>    name                = string<br>    delimiter           = string<br>    attributes          = list(string)<br>    tags                = map(string)<br>    additional_tag_map  = map(string)<br>    regex_replace_chars = string<br>    label_order         = list(string)<br>    id_length_limit     = number<br>  })</pre> | <pre>{<br>  "additional_tag_map": {},<br>  "attributes": [],<br>  "delimiter": null,<br>  "enabled": true,<br>  "environment": null,<br>  "id_length_limit": null,<br>  "label_order": [],<br>  "name": null,<br>  "namespace": null,<br>  "regex_replace_chars": null,<br>  "stage": null,<br>  "tags": {}<br>}</pre> |    no    |
| delimiter                         | Delimiter to be used between `namespace`, `environment`, `stage`, `name` and `attributes`.<br>Defaults to `-` (hyphen). Set to `""` to use no delimiter at all.                                                                                                                                                                             | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| enabled                           | Set to false to prevent the module from creating any resources                                                                                                                                                                                                                                                                              | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| environment                       | Environment, e.g. 'uw2', 'us-west-2', OR 'prod', 'staging', 'dev', 'UAT'                                                                                                                                                                                                                                                                    | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| id\_length\_limit                 | Limit `id` to this many characters.<br>Set to `0` for unlimited length.<br>Set to `null` for default, which is `0`.<br>Does not affect `id_full`.                                                                                                                                                                                           | `number`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| internet\_access\_enabled         | Enables an authorization rule and route for the VPN to access the internet.<br>Please note, you must allow ingress/egress to the internet (0.0.0.0/0) via the Subnet's security group.                                                                                                                                                      | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `true`                                                                                                                                                                                                                                                                                                                 |    no    |
| label\_order                      | The naming order of the id output and Name tag.<br>Defaults to ["namespace", "environment", "stage", "name", "attributes"].<br>You can omit any of the 5 elements, but at least one must be present.                                                                                                                                        | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| logging\_enabled                  | Enables or disables Client VPN Cloudwatch logging.                                                                                                                                                                                                                                                                                          | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                                                                                                                                                                                                                                                |    no    |
| logs\_retention                   | Retention in days for CloudWatch Log Group                                                                                                                                                                                                                                                                                                  | `number`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `365`                                                                                                                                                                                                                                                                                                                  |    no    |
| name                              | Solution name, e.g. 'app' or 'jenkins'                                                                                                                                                                                                                                                                                                      | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| namespace                         | Namespace, which could be your organization name or abbreviation, e.g. 'eg' or 'cp'                                                                                                                                                                                                                                                         | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| organization\_name                | Name of organization to use in private certificate                                                                                                                                                                                                                                                                                          | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                    |   yes    |
| regex\_replace\_chars             | Regex to replace chars with empty string in `namespace`, `environment`, `stage` and `name`.<br>If not set, `"/[^a-zA-Z0-9-]/"` is used to remove all characters other than hyphens, letters and digits.                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| stage                             | Stage, e.g. 'prod', 'staging', 'dev', OR 'source', 'build', 'test', 'deploy', 'release'                                                                                                                                                                                                                                                     | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `null`                                                                                                                                                                                                                                                                                                                 |    no    |
| subnet\_id                        | The Subnet ID to associate with the Client VPN Endpoint.                                                                                                                                                                                                                                                                                    | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | n/a                                                                                                                                                                                                                                                                                                                    |   yes    |
| tags                              | Additional tags (e.g. `map('BusinessUnit','XYZ')`                                                                                                                                                                                                                                                                                           | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `{}`                                                                                                                                                                                                                                                                                                                   |    no    |

## Outputs

| Name         | Description                                   |
| ------------ | --------------------------------------------- |
| endpoint\_id | The ID of the Client VPN Endpoint Connection. |

<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->